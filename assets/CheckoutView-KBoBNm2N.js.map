{"version":3,"file":"CheckoutView-KBoBNm2N.js","sources":["../../node_modules/@paypal/paypal-js/dist/esm/paypal-js.js","../../src/services/paypalService.js","../../src/views/CheckoutView.vue"],"sourcesContent":["/*!\n * paypal-js v8.2.0 (2025-01-23T17:26:53.747Z)\n * Copyright 2020-present, PayPal, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nfunction findScript(url, attributes) {\n    var currentScript = document.querySelector(\"script[src=\\\"\".concat(url, \"\\\"]\"));\n    if (currentScript === null)\n        return null;\n    var nextScript = createScriptElement(url, attributes);\n    // ignore the data-uid-auto attribute that gets auto-assigned to every script tag\n    var currentScriptClone = currentScript.cloneNode();\n    delete currentScriptClone.dataset.uidAuto;\n    // check if the new script has the same number of data attributes\n    if (Object.keys(currentScriptClone.dataset).length !==\n        Object.keys(nextScript.dataset).length) {\n        return null;\n    }\n    var isExactMatch = true;\n    // check if the data attribute values are the same\n    Object.keys(currentScriptClone.dataset).forEach(function (key) {\n        if (currentScriptClone.dataset[key] !== nextScript.dataset[key]) {\n            isExactMatch = false;\n        }\n    });\n    return isExactMatch ? currentScript : null;\n}\nfunction insertScriptElement(_a) {\n    var url = _a.url, attributes = _a.attributes, onSuccess = _a.onSuccess, onError = _a.onError;\n    var newScript = createScriptElement(url, attributes);\n    newScript.onerror = onError;\n    newScript.onload = onSuccess;\n    document.head.insertBefore(newScript, document.head.firstElementChild);\n}\nfunction processOptions(_a) {\n    var customSdkBaseUrl = _a.sdkBaseUrl, environment = _a.environment, options = __rest(_a, [\"sdkBaseUrl\", \"environment\"]);\n    var sdkBaseUrl = customSdkBaseUrl || processSdkBaseUrl(environment);\n    var optionsWithStringIndex = options;\n    var _b = Object.keys(optionsWithStringIndex)\n        .filter(function (key) {\n        return (typeof optionsWithStringIndex[key] !== \"undefined\" &&\n            optionsWithStringIndex[key] !== null &&\n            optionsWithStringIndex[key] !== \"\");\n    })\n        .reduce(function (accumulator, key) {\n        var value = optionsWithStringIndex[key].toString();\n        key = camelCaseToKebabCase(key);\n        if (key.substring(0, 4) === \"data\" || key === \"crossorigin\") {\n            accumulator.attributes[key] = value;\n        }\n        else {\n            accumulator.queryParams[key] = value;\n        }\n        return accumulator;\n    }, {\n        queryParams: {},\n        attributes: {},\n    }), queryParams = _b.queryParams, attributes = _b.attributes;\n    if (queryParams[\"merchant-id\"] &&\n        queryParams[\"merchant-id\"].indexOf(\",\") !== -1) {\n        attributes[\"data-merchant-id\"] = queryParams[\"merchant-id\"];\n        queryParams[\"merchant-id\"] = \"*\";\n    }\n    return {\n        url: \"\".concat(sdkBaseUrl, \"?\").concat(objectToQueryString(queryParams)),\n        attributes: attributes,\n    };\n}\nfunction camelCaseToKebabCase(str) {\n    var replacer = function (match, indexOfMatch) {\n        return (indexOfMatch ? \"-\" : \"\") + match.toLowerCase();\n    };\n    return str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, replacer);\n}\nfunction objectToQueryString(params) {\n    var queryString = \"\";\n    Object.keys(params).forEach(function (key) {\n        if (queryString.length !== 0)\n            queryString += \"&\";\n        queryString += key + \"=\" + params[key];\n    });\n    return queryString;\n}\nfunction processSdkBaseUrl(environment) {\n    // Keeping production as default to maintain backward compatibility.\n    // In the future this logic needs to be changed to use sandbox domain as default instead of production.\n    return environment === \"sandbox\"\n        ? \"https://www.sandbox.paypal.com/sdk/js\"\n        : \"https://www.paypal.com/sdk/js\";\n}\nfunction createScriptElement(url, attributes) {\n    if (attributes === void 0) { attributes = {}; }\n    var newScript = document.createElement(\"script\");\n    newScript.src = url;\n    Object.keys(attributes).forEach(function (key) {\n        newScript.setAttribute(key, attributes[key]);\n        if (key === \"data-csp-nonce\") {\n            newScript.setAttribute(\"nonce\", attributes[\"data-csp-nonce\"]);\n        }\n    });\n    return newScript;\n}\n\n/**\n * Load the Paypal JS SDK script asynchronously.\n *\n * @param {Object} options - used to configure query parameters and data attributes for the JS SDK.\n * @param {PromiseConstructor} [PromisePonyfill=window.Promise] - optional Promise Constructor ponyfill.\n * @return {Promise<Object>} paypalObject - reference to the global window PayPal object.\n */\nfunction loadScript(options, PromisePonyfill) {\n    if (PromisePonyfill === void 0) { PromisePonyfill = Promise; }\n    validateArguments(options, PromisePonyfill);\n    // resolve with null when running in Node or Deno\n    if (typeof document === \"undefined\")\n        return PromisePonyfill.resolve(null);\n    var _a = processOptions(options), url = _a.url, attributes = _a.attributes;\n    var namespace = attributes[\"data-namespace\"] || \"paypal\";\n    var existingWindowNamespace = getPayPalWindowNamespace(namespace);\n    if (!attributes[\"data-js-sdk-library\"]) {\n        attributes[\"data-js-sdk-library\"] = \"paypal-js\";\n    }\n    // resolve with the existing global paypal namespace when a script with the same params already exists\n    if (findScript(url, attributes) && existingWindowNamespace) {\n        return PromisePonyfill.resolve(existingWindowNamespace);\n    }\n    return loadCustomScript({\n        url: url,\n        attributes: attributes,\n    }, PromisePonyfill).then(function () {\n        var newWindowNamespace = getPayPalWindowNamespace(namespace);\n        if (newWindowNamespace) {\n            return newWindowNamespace;\n        }\n        throw new Error(\"The window.\".concat(namespace, \" global variable is not available.\"));\n    });\n}\n/**\n * Load a custom script asynchronously.\n *\n * @param {Object} options - used to set the script url and attributes.\n * @param {PromiseConstructor} [PromisePonyfill=window.Promise] - optional Promise Constructor ponyfill.\n * @return {Promise<void>} returns a promise to indicate if the script was successfully loaded.\n */\nfunction loadCustomScript(options, PromisePonyfill) {\n    if (PromisePonyfill === void 0) { PromisePonyfill = Promise; }\n    validateArguments(options, PromisePonyfill);\n    var url = options.url, attributes = options.attributes;\n    if (typeof url !== \"string\" || url.length === 0) {\n        throw new Error(\"Invalid url.\");\n    }\n    if (typeof attributes !== \"undefined\" && typeof attributes !== \"object\") {\n        throw new Error(\"Expected attributes to be an object.\");\n    }\n    return new PromisePonyfill(function (resolve, reject) {\n        // resolve with undefined when running in Node or Deno\n        if (typeof document === \"undefined\")\n            return resolve();\n        insertScriptElement({\n            url: url,\n            attributes: attributes,\n            onSuccess: function () { return resolve(); },\n            onError: function () {\n                var defaultError = new Error(\"The script \\\"\".concat(url, \"\\\" failed to load. Check the HTTP status code and response body in DevTools to learn more.\"));\n                return reject(defaultError);\n            },\n        });\n    });\n}\nfunction getPayPalWindowNamespace(namespace) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return window[namespace];\n}\nfunction validateArguments(options, PromisePonyfill) {\n    if (typeof options !== \"object\" || options === null) {\n        throw new Error(\"Expected an options object.\");\n    }\n    var environment = options.environment;\n    if (environment &&\n        environment !== \"production\" &&\n        environment !== \"sandbox\") {\n        throw new Error('The `environment` option must be either \"production\" or \"sandbox\".');\n    }\n    if (typeof PromisePonyfill !== \"undefined\" &&\n        typeof PromisePonyfill !== \"function\") {\n        throw new Error(\"Expected PromisePonyfill to be a function.\");\n    }\n}\n\n// replaced with the package.json version at build time\nvar version = \"8.2.0\";\n\nexport { loadCustomScript, loadScript, version };\n","import { loadScript } from \"@paypal/paypal-js\";\n\nconst PAYPAL_CLIENT_ID = import.meta.env.VITE_PAYPAL_CLIENT_ID || 'YOUR_PAYPAL_CLIENT_ID';\n\nexport const paypalService = {\n  async initializePayPal() {\n    try {\n      return await loadScript({\n        \"client-id\": PAYPAL_CLIENT_ID,\n        currency: \"USD\",\n        intent: \"capture\"\n      });\n    } catch (error) {\n      console.error(\"Failed to load PayPal JS SDK:\", error);\n      throw error;\n    }\n  },\n\n  createOrder(total, items) {\n    return {\n      purchase_units: [{\n        amount: {\n          currency_code: \"USD\",\n          value: total.toFixed(2),\n          breakdown: {\n            item_total: {\n              currency_code: \"USD\",\n              value: total.toFixed(2)\n            }\n          }\n        },\n        items: items.map(item => ({\n          name: item.name,\n          unit_amount: {\n            currency_code: \"USD\",\n            value: item.price.toFixed(2)\n          },\n          quantity: item.quantity.toString()\n        }))\n      }]\n    };\n  },\n\n  async handlePayPalError(error) {\n    console.error(\"PayPal Error:\", error);\n    // Add any custom error handling here\n    throw error;\n  }\n}","<template>\n  <div class=\"bg-light-primary dark:bg-dark-primary min-h-screen pb-16\">\n    <!-- Improved checkout steps -->\n    <div class=\"bg-light-secondary dark:bg-dark-secondary shadow-sm py-8 mb-8\">\n      <div class=\"container mx-auto px-4\">\n        <div class=\"max-w-4xl mx-auto\">\n          <div class=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <!-- Step 1 -->\n            <div class=\"flex items-center w-full sm:w-auto\">\n              <div class=\"relative\">\n                <div class=\"w-12 h-12 rounded-full bg-btn-primary text-white flex items-center justify-center font-semibold text-lg\">\n                  1\n                </div>\n                <div class=\"absolute -right-4 top-1/2 h-1 w-8 bg-btn-primary hidden sm:block\"></div>\n              </div>\n              <div class=\"ml-4\">\n                <p class=\"font-medium text-btn-primary\">Cart</p>\n                <p class=\"text-sm text-light-text-secondary dark:text-dark-text-secondary\">Review items</p>\n              </div>\n            </div>\n\n            <!-- Step 2 -->\n            <div class=\"flex items-center w-full sm:w-auto\">\n              <div class=\"relative\">\n                <div class=\"w-12 h-12 rounded-full bg-btn-primary text-white flex items-center justify-center font-semibold text-lg\">\n                  2\n                </div>\n                <div class=\"absolute -right-4 top-1/2 h-1 w-8 bg-btn-primary hidden sm:block\"></div>\n                <div class=\"absolute -left-4 top-1/2 h-1 w-8 bg-btn-primary hidden sm:block\"></div>\n              </div>\n              <div class=\"ml-4\">\n                <p class=\"font-medium text-btn-primary\">Checkout</p>\n                <p class=\"text-sm text-light-text-secondary dark:text-dark-text-secondary\">Payment details</p>\n              </div>\n            </div>\n\n            <!-- Step 3 -->\n            <div class=\"flex items-center w-full sm:w-auto\">\n              <div class=\"relative\">\n                <div class=\"w-12 h-12 rounded-full bg-light-neutral-300 dark:bg-dark-neutral-600 text-light-neutral-600 dark:text-dark-neutral-300 flex items-center justify-center font-semibold text-lg\">\n                  3\n                </div>\n                <div class=\"absolute -left-4 top-1/2 h-1 w-8 bg-light-neutral-300 dark:bg-dark-neutral-600 hidden sm:block\"></div>\n              </div>\n              <div class=\"ml-4\">\n                <p class=\"font-medium text-light-neutral-500 dark:text-dark-neutral-400\">Confirmation</p>\n                <p class=\"text-sm text-light-text-secondary dark:text-dark-text-secondary\">Order complete</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Success message -->\n    <div v-if=\"successMsg\" class=\"container mx-auto px-4\">\n      <div class=\"max-w-3xl mx-auto bg-light-secondary dark:bg-dark-secondary shadow-lg rounded-lg overflow-hidden\">\n        <div class=\"bg-green-50 dark:bg-green-900 p-6 sm:p-10 text-center\">\n          <div class=\"flex justify-center mb-5\">\n            <div class=\"rounded-full bg-green-100 dark:bg-green-800 p-3\">\n              <svg class=\"h-10 w-10 text-green-600 dark:text-green-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n          </div>\n          <h2 class=\"text-2xl font-bold text-green-800 dark:text-green-200 mb-2\">Order Placed Successfully!</h2>\n          <p class=\"text-green-700 dark:text-green-300 text-lg\">{{ successMsg }}</p>\n          <p class=\"mt-4 text-light-text-secondary dark:text-dark-text-secondary\">Redirecting to your account page...</p>\n          <div class=\"mt-8 flex justify-center\">\n            <router-link to=\"/account\" class=\"px-6 py-3 bg-accent-primary hover:bg-accent-secondary text-white font-medium rounded-md transition-all\">\n              View order details\n            </router-link>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Error message -->\n    <div v-else-if=\"errorMsg\" class=\"container mx-auto px-4 mb-8\">\n      <div class=\"max-w-3xl mx-auto bg-red-50 dark:bg-red-900 border border-red-200 dark:border-red-800 p-4 rounded-lg flex items-start\">\n        <div class=\"flex-shrink-0 mt-0.5\">\n          <svg class=\"h-5 w-5 text-red-600 dark:text-red-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n          </svg>\n        </div>\n        <div class=\"ml-3\">\n          <p class=\"text-red-700 dark:text-red-300 font-medium\">{{ errorMsg }}</p>\n        </div>\n        <button @click=\"errorMsg = ''\" class=\"ml-auto text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\">\n          <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n\n    <!-- Main checkout content -->\n    <div v-else class=\"container mx-auto px-4\">\n      <div class=\"grid grid-cols-1 lg:grid-cols-3 lg:gap-8\">\n        <!-- Checkout form (2/3 width) -->\n        <div class=\"lg:col-span-2\">\n          <form @submit.prevent=\"placeOrder\">\n            <!-- Shipping Information -->\n            <div class=\"bg-light-secondary dark:bg-dark-secondary shadow rounded-lg overflow-hidden mb-8\">\n              <div class=\"bg-light-neutral-100 dark:bg-dark-neutral-800 py-4 px-6 border-b border-light-neutral-200 dark:border-dark-neutral-700\">\n                <div class=\"flex items-center\">\n                  <div class=\"bg-accent-primary rounded-full h-8 w-8 flex items-center justify-center mr-3\">\n                    <svg class=\"h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                    </svg>\n                  </div>\n                  <h2 class=\"text-xl font-bold text-light-text-primary dark:text-dark-text-primary\">Shipping Information</h2>\n                </div>\n              </div>\n\n              <div class=\"p-6\">\n                <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n                  <div>\n                    <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">First Name</label>\n                    <input\n                      v-model=\"shippingInfo.firstName\"\n                      type=\"text\"\n                      required\n                      class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                        bg-light-secondary dark:bg-dark-secondary\n                        text-light-text-primary dark:text-dark-text-primary\n                        rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                        outline-none transition-all\"\n                      placeholder=\"Your first name\"\n                    >\n                  </div>\n\n                  <div>\n                    <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Last Name</label>\n                    <input\n                      v-model=\"shippingInfo.lastName\"\n                      type=\"text\"\n                      required\n                      class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                        bg-light-secondary dark:bg-dark-secondary\n                        text-light-text-primary dark:text-dark-text-primary\n                        rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                        outline-none transition-all\"\n                      placeholder=\"Your last name\"\n                    >\n                  </div>\n\n                  <div>\n                    <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Email</label>\n                    <input\n                      v-model=\"shippingInfo.email\"\n                      type=\"email\"\n                      required\n                      class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                        bg-light-secondary dark:bg-dark-secondary\n                        text-light-text-primary dark:text-dark-text-primary\n                        rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                        outline-none transition-all\"\n                      placeholder=\"your.email@example.com\"\n                    >\n                  </div>\n\n                  <div>\n                    <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Phone</label>\n                    <input\n                      v-model=\"shippingInfo.phone\"\n                      type=\"tel\"\n                      required\n                      class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                        bg-light-secondary dark:bg-dark-secondary\n                        text-light-text-primary dark:text-dark-text-primary\n                        rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                        outline-none transition-all\"\n                      placeholder=\"254XXXXXXXXX\"\n                    >\n                  </div>\n                </div>\n\n                <div class=\"mb-6\">\n                  <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Delivery Method</label>\n                  <select\n                    v-model=\"shippingInfo.deliveryMethod\"\n                    required\n                    class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                      bg-light-secondary dark:bg-dark-secondary\n                      text-light-text-primary dark:text-dark-text-primary\n                      rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                      outline-none transition-all\"\n                    @change=\"handleDeliveryMethodChange\"\n                  >\n                    <option value=\"\">Select delivery method</option>\n                    <option value=\"delivery\">Home/Office Delivery</option>\n                    <option value=\"pickup\">Pickup Point</option>\n                  </select>\n                </div>\n\n                <!-- City Selection -->\n                <div class=\"mb-6\">\n                  <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">City</label>\n                  <select\n                    v-model=\"shippingInfo.city\"\n                    required\n                    class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                      bg-light-secondary dark:bg-dark-secondary\n                      text-light-text-primary dark:text-dark-text-primary\n                      rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                      outline-none transition-all\"\n                    @change=\"handleCityChange\"\n                  >\n                    <option value=\"\">Select city</option>\n                    <option v-for=\"city in cities\" :key=\"city\" :value=\"city\">\n                      {{ city }}\n                    </option>\n                  </select>\n                </div>\n\n                <!-- Pickup Point (shown only when delivery method is pickup) -->\n                <div v-if=\"shippingInfo.deliveryMethod === 'pickup'\" class=\"mb-6\">\n                  <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Pickup Point</label>\n                  <select\n                    v-model=\"shippingInfo.pickupPoint\"\n                    required\n                    class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                      bg-light-secondary dark:bg-dark-secondary\n                      text-light-text-primary dark:text-dark-text-primary\n                      rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                      outline-none transition-all\"\n                  >\n                    <option value=\"\">Select pickup point</option>\n                    <option v-for=\"point in availablePickupPoints\" :key=\"point\" :value=\"point\">\n                      {{ point }}\n                    </option>\n                  </select>\n                </div>\n\n                <!-- Detailed Address (shown only when delivery method is delivery) -->\n                <div v-if=\"shippingInfo.deliveryMethod === 'delivery'\" class=\"mb-6\">\n                  <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Detailed Address</label>\n                  <textarea\n                    v-model=\"shippingInfo.address\"\n                    required\n                    rows=\"3\"\n                    class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                      bg-light-secondary dark:bg-dark-secondary\n                      text-light-text-primary dark:text-dark-text-primary\n                      rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                      outline-none transition-all\"\n                    placeholder=\"Enter your detailed address (e.g., House/Apartment number, Street name, Estate/Area)\"\n                  ></textarea>\n                  <p class=\"mt-1 text-sm text-light-text-secondary dark:text-dark-text-secondary\">\n                    Please provide landmarks or additional directions to help locate your address\n                  </p>\n                </div>\n\n                <div class=\"mt-6\">\n                  <div class=\"flex items-center\">\n                    <input\n                      id=\"save-info\"\n                      type=\"checkbox\"\n                      v-model=\"saveInfo\"\n                      class=\"h-4 w-4 text-accent-primary focus:ring-accent-primary border-light-neutral-300 dark:border-dark-neutral-600 rounded\"\n                    >\n                    <label for=\"save-info\" class=\"ml-2 block text-sm text-light-text-primary dark:text-dark-text-primary\">\n                      Save this information for next time\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <!-- Payment Method Tabs -->\n            <div class=\"bg-light-secondary dark:bg-dark-secondary shadow rounded-lg overflow-hidden mb-8\">\n              <div class=\"bg-light-neutral-100 dark:bg-dark-neutral-800 py-4 px-6 border-b border-light-neutral-200 dark:border-dark-neutral-700\">\n                <div class=\"flex items-center\">\n                  <div class=\"bg-accent-primary rounded-full h-8 w-8 flex items-center justify-center mr-3\">\n                    <svg class=\"h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\" />\n                    </svg>\n                  </div>\n                  <h2 class=\"text-xl font-bold text-light-text-primary dark:text-dark-text-primary\">Payment Method</h2>\n                </div>\n              </div>\n\n              <div class=\"p-6\">\n                <!-- Payment Method Selector -->\n                <div class=\"border-b border-light-neutral-200 dark:border-dark-neutral-700\">\n                  <nav class=\"-mb-px flex space-x-8\">\n                    <button\n                      v-for=\"tab in paymentTabs\"\n                      :key=\"tab.id\"\n                      @click=\"selectedPaymentMethod = tab.id\"\n                      :class=\"[\n                        selectedPaymentMethod === tab.id\n                          ? 'border-accent-primary text-accent-primary'\n                          : 'border-transparent text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary hover:border-light-neutral-300 dark:hover:border-dark-neutral-700',\n                        'whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm'\n                      ]\"\n                    >\n                      {{ tab.name }}\n                    </button>\n                  </nav>\n                </div>\n\n                <!-- Mobile Money (M-Pesa) -->\n                <div v-if=\"selectedPaymentMethod === 'mobile-money'\" class=\"mt-6\">\n                  <div class=\"mb-6\">\n                    <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Phone Number</label>\n                    <input\n                      v-model=\"mpesaInfo.phoneNumber\"\n                      type=\"tel\"\n                      required\n                      placeholder=\"254XXXXXXXXX\"\n                      class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n                        bg-light-secondary dark:bg-dark-secondary\n                        text-light-text-primary dark:text-dark-text-primary\n                        rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n                        outline-none transition-all\"\n                    >\n                  </div>\n                  <p class=\"text-sm text-light-text-secondary dark:text-dark-text-secondary mt-2\">\n                    You will receive an M-Pesa prompt on your phone to complete the payment.\n                  </p>\n                </div>\n\n                <!-- Cash on Delivery -->\n                <div v-if=\"selectedPaymentMethod === 'cash'\" class=\"mt-6\">\n                  <div class=\"bg-light-neutral-100 dark:bg-dark-neutral-800 p-4 rounded-md\">\n                    <p class=\"text-sm text-light-text-primary dark:text-dark-text-primary\">\n                      You will pay in cash when your order is delivered. Please have the exact amount ready.\n                    </p>\n                    <div class=\"mt-4\">\n                      <label class=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          v-model=\"cashOnDeliveryAgreed\"\n                          class=\"h-4 w-4 text-accent-primary focus:ring-accent-primary border-light-neutral-300 dark:border-dark-neutral-600 rounded\"\n                        >\n                        <span class=\"ml-2 text-sm text-light-text-primary dark:text-dark-text-primary\">\n                          I agree to pay the full amount of {{ formatCurrency(total + (subtotal * 0.08)) }} upon delivery\n                        </span>\n                      </label>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- Credit Card -->\n                <div v-if=\"selectedPaymentMethod === 'card'\" class=\"mt-6\">\n                  <!-- Existing card payment form -->\n                  <div class=\"p-6\">\n                    <div class=\"mb-8\">\n                      <div class=\"flex items-center justify-between mb-4\">\n                        <p class=\"text-sm font-medium text-light-text-primary dark:text-dark-text-primary\">Accepted Cards</p>\n                        <div class=\"flex space-x-2\">\n                          <div class=\"h-8 w-12 rounded border bg-light-neutral-100 dark:bg-dark-neutral-800 flex items-center justify-center\">\n                            <span class=\"text-xs font-bold text-blue-700\">VISA</span>\n                          </div>\n                          <div class=\"h-8 w-12 rounded border bg-light-neutral-100 dark:bg-dark-neutral-800 flex items-center justify-center\">\n                            <span class=\"text-xs font-bold text-red-700\">MC</span>\n                          </div>\n                          <div class=\"h-8 w-12 rounded border bg-light-neutral-100 dark:bg-dark-neutral-800 flex items-center justify-center\">\n                            <span class=\"text-xs font-bold text-blue-900\">AMEX</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class=\"mb-6\">\n                      <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Name on Card</label>\n                      <input\n                        v-model=\"paymentInfo.cardName\"\n                        type=\"text\"\n                        required\n                        class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n    bg-light-secondary dark:bg-dark-secondary\n    text-light-text-primary dark:text-dark-text-primary\n    rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n    outline-none transition-all\"\n                      >\n                    </div>\n\n                    <div class=\"mb-6\">\n                      <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Card Number</label>\n                      <div class=\"relative\">\n                        <input\n                          v-model=\"paymentInfo.cardNumber\"\n                          type=\"text\"\n                          required\n                          placeholder=\"1234 5678 9012 3456\"\n                          class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n    bg-light-secondary dark:bg-dark-secondary\n    text-light-text-primary dark:text-dark-text-primary\n    rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n    outline-none transition-all\"\n                          v-mask=\"'#### #### #### ####'\"\n                        >\n                        <div class=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\n                          <svg class=\"h-5 w-5 text-light-neutral-400 dark:text-dark-neutral-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                          </svg>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <div>\n                        <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">Expiration Date</label>\n                        <input\n                          v-model=\"paymentInfo.expirationDate\"\n                          type=\"text\"\n                          required\n                          placeholder=\"MM/YY\"\n                          class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n    bg-light-secondary dark:bg-dark-secondary\n    text-light-text-primary dark:text-dark-text-primary\n    rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n    outline-none transition-all\"\n                          v-mask=\"'##/##'\"\n                        >\n                      </div>\n\n                      <div>\n                        <label class=\"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-1\">CVV</label>\n                        <div class=\"relative\">\n                          <input\n                            v-model=\"paymentInfo.cvv\"\n                            type=\"text\"\n                            required\n                            placeholder=\"123\"\n                            class=\"w-full px-4 py-2 border border-light-neutral-300 dark:border-dark-neutral-600 \n    bg-light-secondary dark:bg-dark-secondary\n    text-light-text-primary dark:text-dark-text-primary\n    rounded-md focus:ring-2 focus:ring-accent-primary focus:border-accent-primary \n    outline-none transition-all\"\n                            v-mask=\"'###'\"\n                            maxlength=\"3\"\n                          >\n                          <div class=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                            <button\n                              type=\"button\"\n                              @click=\"showCvvHelp = !showCvvHelp\"\n                              class=\"text-light-neutral-400 dark:text-dark-neutral-600 hover:text-light-neutral-500 dark:hover:text-dark-neutral-500 focus:outline-none\"\n                            >\n                              <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                              </svg>\n                            </button>\n                          </div>\n                        </div>\n                        <div v-if=\"showCvvHelp\" class=\"mt-1 text-sm text-light-neutral-500 dark:text-dark-neutral-500\">\n                          The CVV is a 3-digit security code found on the back of your card.\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- PayPal -->\n                <div v-if=\"selectedPaymentMethod === 'paypal'\" class=\"mt-6\">\n                  <div class=\"bg-light-neutral-100 dark:bg-dark-neutral-800 p-4 rounded-md text-center\">\n                    <div class=\"mx-auto max-w-[200px] mb-4\">\n                      <a \n                        href=\"/digital-wallet/ways-to-pay/add-payment-method\" \n                        title=\"How PayPal Works\" \n                        @click.prevent=\"handlePayPalInfo\"\n                        class=\"inline-block\"\n                      >\n                        <img \n                          src=\"https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_74x46.jpg\" \n                          alt=\"PayPal Logo\"\n                          class=\"mx-auto\"\n                        >\n                      </a>\n                    </div>\n                    <p class=\"text-sm text-light-text-primary dark:text-dark-text-primary my-4\">\n                      You will be redirected to PayPal to complete your payment securely.\n                    </p>\n                    <div ref=\"paypalButtonsContainer\"></div>\n                    <button\n                      type=\"button\"\n                      @click=\"handlePayPalCheckout\"\n                      class=\"w-full py-3 bg-btn-primary hover:bg-btn-primary-hover active:bg-btn-primary-dark text-white font-medium rounded-md transition-all\"\n                    >\n                      Checkout with PayPal\n                    </button>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              class=\"w-full py-4 bg-btn-primary hover:bg-btn-primary-hover active:bg-btn-primary-dark text-white text-lg font-medium rounded-md transition-all flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-primary\"\n              :class=\"{'opacity-75 cursor-not-allowed': loading || !isPaymentMethodValid}\"\n              :disabled=\"loading || !isPaymentMethodValid\"\n            >\n              <svg v-if=\"loading\" class=\"animate-spin -ml-1 mr-2 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n                <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n              </svg>\n              {{ getPaymentButtonText() }}\n            </button>\n          </form>\n        </div>\n\n        <!-- Order summary -->\n        <div class=\"mt-10 lg:mt-0\">\n          <div class=\"bg-light-secondary dark:bg-dark-secondary shadow rounded-lg overflow-hidden sticky top-6\">\n            <div class=\"bg-light-neutral-100 dark:bg-dark-neutral-800 py-4 px-6 border-b border-light-neutral-200 dark:border-dark-neutral-700\">\n              <h2 class=\"text-lg font-bold text-light-text-primary dark:text-dark-text-primary\">Order Summary</h2>\n            </div>\n\n            <div class=\"px-6 py-4\">\n              <div class=\"flow-root\">\n                <ul class=\"-my-4 divide-y divide-light-neutral-200 dark:divide-dark-neutral-700\">\n                  <li v-for=\"item in cart\" :key=\"item.id\" class=\"py-4 flex\">\n                    <div class=\"flex-shrink-0 w-16 h-16 border border-light-neutral-200 dark:border-dark-neutral-700 rounded-md overflow-hidden\">\n                      <img :src=\"item.imageUrl || item.image || 'https://placehold.co/64'\" :alt=\"item.name\" class=\"w-full h-full object-center object-cover\">\n                    </div>\n                    <div class=\"ml-4 flex-1 flex flex-col\">\n                      <div>\n                        <div class=\"flex justify-between text-sm font-medium text-light-text-primary dark:text-dark-text-primary\">\n                          <h3>{{ item.name }}</h3>\n                          <p class=\"ml-4\">{{ formatCurrency(item.price * item.quantity) }}</p>\n                        </div>\n                        <p class=\"mt-1 text-sm text-light-text-secondary dark:text-dark-text-secondary\">\n                          {{ item.category || 'Jewelry' }}\n                        </p>\n                      </div>\n                      <div class=\"flex-1 flex items-end justify-between text-sm\">\n                        <p class=\"text-light-text-secondary dark:text-dark-text-secondary\">Qty {{ item.quantity }}</p>\n                      </div>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </div>\n\n            <div class=\"border-t border-light-neutral-200 dark:border-dark-neutral-700 px-6 py-4 space-y-3\">\n              <div class=\"flex justify-between text-sm text-light-text-secondary dark:text-dark-text-secondary\">\n                <p>Subtotal</p>\n                <p>{{ formatCurrency(subtotal) }}</p>\n              </div>\n\n              <div class=\"flex justify-between text-sm text-light-text-secondary dark:text-dark-text-secondary\">\n                <p>Shipping</p>\n                <p v-if=\"shippingCost > 0\">{{ formatCurrency(shippingCost) }}</p>\n                <p v-else class=\"text-green-600 dark:text-green-400\">Free</p>\n              </div>\n\n              <div class=\"flex justify-between text-sm text-light-text-secondary dark:text-dark-text-secondary\">\n                <p>Taxes (estimated)</p>\n                <p>{{ formatCurrency(subtotal * 0.08) }}</p>\n              </div>\n\n              <div class=\"pt-3 border-t border-light-neutral-200 dark:border-dark-neutral-700\">\n                <div class=\"flex justify-between text-base font-medium text-light-text-primary dark:text-dark-text-primary\">\n                  <p>Total</p>\n                  <p>{{ formatCurrency(total + (subtotal * 0.08)) }}</p>\n                </div>\n                <p class=\"mt-1 text-sm text-light-text-secondary dark:text-dark-text-secondary\">Shipping and taxes calculated at checkout</p>\n              </div>\n            </div>\n\n            <div class=\"px-6 pb-6 pt-2\">\n              <div class=\"mt-2\">\n                <div class=\"border border-light-neutral-300 dark:border-dark-neutral-600 rounded-md p-4 bg-light-neutral-100 dark:bg-dark-neutral-800\">\n                  <div class=\"flex\">\n                    <div class=\"flex-shrink-0\">\n                      <svg class=\"h-5 w-5 text-green-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n                      </svg>\n                    </div>\n                    <div class=\"ml-3\">\n                      <p class=\"text-sm text-light-text-primary dark:text-dark-text-primary\">\n                        <strong>Secure checkout</strong> - Your payment information is protected\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"mt-4 flex justify-center\">\n                <div class=\"flex items-center space-x-2\">\n                  <svg class=\"h-5 w-5 text-light-neutral-400 dark:text-dark-neutral-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                  </svg>\n                  <span class=\"text-xs text-light-text-secondary dark:text-dark-text-secondary\">SSL Secure Payment</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuthStore } from '../stores/auth'\nimport { useCartStore } from '../stores/cart'\nimport { firebaseService } from '../services/firebaseService'\nimport { paypalService } from '../services/paypalService'\nimport { formatCurrency } from '@/utils/currency'\n\n// Remove the conflicting import and implement the directive locally\n// import { vMask } from \"@vuelidate/validators\"\n\nconst router = useRouter()\nconst authStore = useAuthStore()\nconst cartStore = useCartStore()\n\nconst loading = ref(false)\nconst errorMsg = ref('')\nconst successMsg = ref('')\nconst userProfile = ref(null)\nconst showCvvHelp = ref(false)\nconst saveInfo = ref(true)\n\nconst cities = [\n  'Nairobi',\n  'Mombasa',\n  'Kisumu',\n  'Nakuru',\n  'Eldoret',\n  'Kitengela',\n  'Thika',\n  'Machakos',\n  'Kahawa',\n  'Ruiru',\n  'Athi River',\n  'Kiambu',\n  'Rongai'\n];\n\nconst pickupPoints = {\n  'Nairobi': [\n    'CBD - Kencom House',\n    'CBD - Archives',\n    'CBD - Afya Centre',\n    'Westlands - The Mall',\n    'Eastleigh - First Avenue',\n    'South B - Capital Center',\n    'Karen - Karen Hub'\n  ],\n  'Kitengela': [\n    'Kitengela Mall',\n    'EPZ Plaza',\n    'Milestone Mall'\n  ],\n  'Kahawa': [\n    'Kahawa West Shopping Center',\n    'Kahawa Sukari Mall',\n    'Kahawa Wendani Plaza'\n  ],\n  // Add more cities and their pickup points as needed\n};\n\n// Form data\nconst shippingInfo = ref({\n  firstName: '',\n  lastName: '',\n  email: '',\n  phone: '',\n  deliveryMethod: '',\n  city: '',\n  pickupPoint: '',\n  address: ''\n});\n\nconst availablePickupPoints = ref([]);\n\nconst handleDeliveryMethodChange = () => {\n  shippingInfo.value.pickupPoint = '';\n  shippingInfo.value.address = '';\n};\n\nconst handleCityChange = () => {\n  shippingInfo.value.pickupPoint = '';\n  if (shippingInfo.value.city && pickupPoints[shippingInfo.value.city]) {\n    availablePickupPoints.value = pickupPoints[shippingInfo.value.city];\n  } else {\n    availablePickupPoints.value = [];\n  }\n};\n\nconst paymentInfo = ref({\n  cardName: '',\n  cardNumber: '',\n  expirationDate: '',\n  cvv: ''\n})\n\n// Payment method tabs\nconst paymentTabs = [\n  { id: 'mobile-money', name: 'M-Pesa' },\n  { id: 'cash', name: 'Cash on Delivery' },\n  { id: 'card', name: 'Card Payment' },\n  { id: 'paypal', name: 'PayPal' }\n]\n\nconst selectedPaymentMethod = ref('mobile-money')\nconst mpesaInfo = ref({\n  phoneNumber: ''\n})\nconst cashOnDeliveryAgreed = ref(false)\n\n// Add PayPal specific state\nconst paypalButtonsContainer = ref(null)\nconst paypalLoaded = ref(false)\n\n// Add payment loading state\nconst paymentProcessing = ref(false)\nconst paymentStep = ref(1) // 1: Info, 2: Payment, 3: Confirmation\n\n// Watch for payment method changes\nwatch(selectedPaymentMethod, async (newMethod) => {\n  if (newMethod === 'paypal' && !paypalLoaded.value) {\n    await initializePayPalButtons()\n  }\n})\n\n// Initialize PayPal\nconst initializePayPalButtons = async () => {\n  try {\n    const paypal = await paypalService.initializePayPal()\n    \n    if (paypalButtonsContainer.value) {\n      paypal.Buttons({\n        style: {\n          layout: 'vertical',\n          color: 'blue',\n          shape: 'rect',\n          label: 'paypal'\n        },\n        createOrder: async (data, actions) => {\n          const orderData = paypalService.createOrder(\n            total.value + (subtotal.value * 0.08),\n            cart.value\n          )\n          return actions.order.create(orderData)\n        },\n        onApprove: async (data, actions) => {\n          paymentProcessing.value = true\n          try {\n            const order = await actions.order.capture()\n            await handlePayPalSuccess(order)\n          } catch (error) {\n            await paypalService.handlePayPalError(error)\n          } finally {\n            paymentProcessing.value = false\n          }\n        },\n        onError: async (err) => {\n          await paypalService.handlePayPalError(err)\n        }\n      }).render(paypalButtonsContainer.value)\n      \n      paypalLoaded.value = true\n    }\n  } catch (error) {\n    console.error('Failed to initialize PayPal:', error)\n    errorMsg.value = 'Failed to initialize PayPal. Please try another payment method.'\n  }\n}\n\n// Handle PayPal success\nconst handlePayPalSuccess = async (paypalOrder) => {\n  try {\n    const orderData = {\n      ...getBaseOrderData(),\n      paymentMethod: 'paypal',\n      paymentDetails: {\n        paypal: true,\n        orderId: paypalOrder.id,\n        status: paypalOrder.status,\n        payerEmail: paypalOrder.payer.email_address\n      },\n      status: 'paid'\n    }\n    \n    await firebaseService.createOrder(orderData)\n    cartStore.clearCart()\n    successMsg.value = `Order placed successfully! Payment completed via PayPal.`\n    \n    setTimeout(() => {\n      router.push('/account')\n    }, 3000)\n  } catch (error) {\n    console.error('Error processing PayPal order:', error)\n    errorMsg.value = 'Failed to process PayPal payment. Please contact support.'\n  }\n}\n\n// Helper to get base order data\nconst getBaseOrderData = () => ({\n  userId: authStore.user.uid,\n  orderNumber: `ORD-${Date.now().toString().slice(-6)}`,\n  items: cart.value,\n  subtotal: subtotal.value,\n  shipping: shippingCost.value,\n  total: total.value + (subtotal.value * 0.08),\n  shippingInfo: { ...shippingInfo.value },\n  orderDate: new Date(),\n  estimatedDelivery: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)\n})\n\n// Validate payment method\nconst isPaymentMethodValid = computed(() => {\n  switch (selectedPaymentMethod.value) {\n    case 'mobile-money':\n      return /^254[0-9]{9}$/.test(mpesaInfo.value.phoneNumber)\n    case 'cash':\n      return cashOnDeliveryAgreed.value\n    case 'card':\n      return paymentInfo.value.cardNumber && \n             paymentInfo.value.cardName && \n             paymentInfo.value.expirationDate && \n             paymentInfo.value.cvv\n    case 'paypal':\n      return true\n    default:\n      return false\n  }\n})\n\n// Get payment button text\nconst getPaymentButtonText = () => {\n  if (loading.value) return 'Processing...'\n  \n  switch (selectedPaymentMethod.value) {\n    case 'mobile-money':\n      return `Pay with M-Pesa - ${formatCurrency(total.value + (subtotal.value * 0.08))}`\n    case 'cash':\n      return `Place Order - Pay ${formatCurrency(total.value + (subtotal.value * 0.08))} on Delivery`\n    case 'card':\n      return `Pay ${formatCurrency(total.value + (subtotal.value * 0.08))}`\n    case 'paypal':\n      return `Proceed to PayPal - ${formatCurrency(total.value + (subtotal.value * 0.08))}`\n    default:\n      return `Complete Order - ${formatCurrency(total.value + (subtotal.value * 0.08))}`\n  }\n}\n\n// Handle PayPal checkout\nconst handlePayPalCheckout = () => {\n  // Implement PayPal checkout logic here\n  console.log('Redirecting to PayPal...')\n}\n\n// Add this new function for PayPal info modal\nconst handlePayPalInfo = () => {\n  window.open(\n    '/digital-wallet/ways-to-pay/add-payment-method',\n    'WIPaypal',\n    'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=1060, height=700'\n  )\n}\n\n// Cart calculations\nconst cart = computed(() => cartStore.cart)\nconst subtotal = computed(() => cartStore.subtotal)\nconst shippingCost = computed(() => subtotal.value >= 100 ? 0 : 10)\nconst total = computed(() => subtotal.value + shippingCost.value)\n\n// Load user profile data if logged in\nonMounted(async () => {\n  if (authStore.user) {\n    try {\n      const profile = await firebaseService.getUserProfile(authStore.user.uid)\n      userProfile.value = profile\n\n      if (profile) {\n        shippingInfo.value = {\n          ...shippingInfo.value,\n          firstName: profile.firstName || '',\n          lastName: profile.lastName || '',\n          email: profile.email || authStore.user.email,\n          phone: profile.phone || '',\n          address: profile.address || ''\n        }\n      }\n    } catch (error) {\n      console.error('Error loading user profile:', error)\n    }\n  } else {\n    // Redirect if not logged in\n    router.push('/login?redirect=checkout')\n  }\n\n  // Redirect if cart is empty\n  if (cart.value.length === 0) {\n    router.push('/cart')\n  }\n})\n\n// Submit order\nconst placeOrder = async () => {\n  loading.value = true\n  errorMsg.value = ''\n\n  if (cart.value.length === 0) {\n    errorMsg.value = 'Your cart is empty'\n    loading.value = false\n    return\n  }\n\n  try {\n    const timestamp = new Date()\n    const orderNumber = `ORD-${Date.now().toString().slice(-6)}`\n\n    // Create order in Firestore with payment method\n    const orderData = {\n      userId: authStore.user.uid,\n      orderNumber: orderNumber,\n      items: cart.value,\n      subtotal: subtotal.value,\n      shipping: shippingCost.value,\n      total: total.value,\n      shippingInfo: {\n        ...shippingInfo.value\n      },\n      paymentMethod: selectedPaymentMethod.value,\n      paymentDetails: getPaymentDetails(),\n      status: getOrderStatus(),\n      orderDate: timestamp,\n      estimatedDelivery: new Date(timestamp.setDate(timestamp.getDate() + 7))\n    }\n\n    const orderRef = await firebaseService.createOrder(orderData)\n\n    // Handle M-Pesa payment\n    if (selectedPaymentMethod.value === 'mobile-money') {\n      // Implement M-Pesa payment integration here\n      // You would typically call your backend API to initiate the M-Pesa payment\n      await initiateGepPayment(orderRef.id)\n    }\n\n    // Clear the cart\n    cartStore.clearCart()\n\n    // Show success message\n    successMsg.value = getSuccessMessage(orderNumber)\n\n    // Redirect to orders page after a delay\n    setTimeout(() => {\n      router.push('/account')\n    }, 3000)\n  } catch (error) {\n    errorMsg.value = 'Failed to place order. Please try again.'\n    console.error('Error placing order:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\n// Helper function to get payment details based on payment method\nconst getPaymentDetails = () => {\n  switch (selectedPaymentMethod.value) {\n    case 'mobile-money':\n      return {\n        phoneNumber: mpesaInfo.value.phoneNumber\n      }\n    case 'cash':\n      return {\n        cashOnDelivery: true\n      }\n    case 'card':\n      return {\n        cardName: paymentInfo.value.cardName,\n        lastFourDigits: paymentInfo.value.cardNumber.slice(-4),\n        cardType: getCardType(paymentInfo.value.cardNumber)\n      }\n    case 'paypal':\n      return {\n        paypal: true\n      }\n    default:\n      return {}\n  }\n}\n\n// Helper function to get initial order status based on payment method\nconst getOrderStatus = () => {\n  switch (selectedPaymentMethod.value) {\n    case 'mobile-money':\n      return 'awaiting_payment'\n    case 'cash':\n      return 'pending'\n    case 'card':\n    case 'paypal':\n      return 'processing'\n    default:\n      return 'pending'\n  }\n}\n\n// Helper function to get success message based on payment method\nconst getSuccessMessage = (orderNumber) => {\n  switch (selectedPaymentMethod.value) {\n    case 'mobile-money':\n      return `Order ${orderNumber} placed! Please check your phone for the M-Pesa payment prompt.`\n    case 'cash':\n      return `Order ${orderNumber} placed! Please have ${formatCurrency(total.value + (subtotal.value * 0.08))} ready for delivery.`\n    case 'card':\n      return `Order ${orderNumber} placed successfully! Your card has been charged.`\n    case 'paypal':\n      return `Order ${orderNumber} placed successfully! Payment completed via PayPal.`\n    default:\n      return `Order placed successfully! Your order number is ${orderNumber}.`\n  }\n}\n\n// Implement M-Pesa payment initiation\nconst initiateGepPayment = async (orderId) => {\n  try {\n    // This would be implemented according to your payment gateway's requirements\n    console.log('Initiating M-Pesa payment for order:', orderId)\n    // Call your backend API to initiate the payment\n  } catch (error) {\n    console.error('Error initiating M-Pesa payment:', error)\n    throw error\n  }\n}\n\n// Helper function to determine card type based on first digits\nconst getCardType = (cardNumber) => {\n  const cleanedNumber = cardNumber.replace(/\\D/g, '')\n\n  if (/^4/.test(cleanedNumber)) return 'Visa'\n  if (/^5[1-5]/.test(cleanedNumber)) return 'MasterCard'\n  if (/^3[47]/.test(cleanedNumber)) return 'American Express'\n  if (/^6(?:011|5)/.test(cleanedNumber)) return 'Discover'\n  return 'Unknown'\n}\n\n// Form validation directive (for applying masks to inputs)\nconst directive = {\n  mounted(el, binding) {\n    el.addEventListener('input', (e) => {\n      const { value } = binding\n      if (!value || !value.value) return  // Guard against undefined value\n\n      const inputValue = e.target.value.replace(/\\D/g, '')\n      const mask = value.value\n\n      let result = ''\n      let currentIndex = 0\n\n      for (let i = 0; i < mask.length && currentIndex < inputValue.length; i++) {\n        if (mask[i] === '#') {\n          result += inputValue[currentIndex]\n          currentIndex++\n        } else {\n          result += mask[i]\n        }\n      }\n\n      e.target.value = result\n    })\n  }\n}\n\n// Create our custom directive for Vue\nconst vMaskDirective = {\n  mounted(el, binding) {\n    if (binding && binding.value) {  // Added null check\n      directive.mounted(el, binding)\n    }\n  }\n}\n\n// Register the custom directive\nconst vMask = vMaskDirective\n</script>\n\n<style scoped>\n.form-input {\n  width: 100%;\n  padding: 0.5rem 1rem;\n  border-width: 1px;\n  border-radius: 0.375rem;\n  outline: none;\n  transition: all;\n}\n\n.form-label {\n  display: block;\n  font-size: 0.875rem;\n  font-weight: 500;\n  margin-bottom: 0.25rem;\n}\n\n.btn {\n  padding: 0.5rem 1rem;\n  border-radius: 0.375rem;\n  transition: all;\n  font-weight: 500;\n}\n\n.btn-primary {\n  background-color: var(--accent-primary);\n  color: white;\n}\n.btn-primary:hover {\n  background-color: var(--accent-secondary);\n}\n.btn-primary:focus {\n  outline: 2px solid var(--accent-primary);\n  outline-offset: 2px;\n  box-shadow: 0 0 0 2px var(--accent-primary);\n}\n\n.btn-secondary {\n  background-color: var(--light-neutral-200);\n  color: var(--light-text-primary);\n}\n.btn-secondary:hover {\n  background-color: var(--light-neutral-300);\n}\n\n:root[data-theme=\"dark\"] .btn-secondary {\n  background-color: var(--dark-neutral-700);\n  color: var(--dark-text-primary);\n}\n:root[data-theme=\"dark\"] .btn-secondary:hover {\n  background-color: var (--dark-neutral-600);\n}\n</style>"],"names":["__rest","s","e","t","p","i","findScript","url","attributes","currentScript","nextScript","createScriptElement","currentScriptClone","isExactMatch","key","insertScriptElement","_a","onSuccess","onError","newScript","processOptions","customSdkBaseUrl","environment","options","sdkBaseUrl","processSdkBaseUrl","optionsWithStringIndex","_b","accumulator","value","camelCaseToKebabCase","queryParams","objectToQueryString","str","replacer","match","indexOfMatch","params","queryString","loadScript","PromisePonyfill","validateArguments","namespace","existingWindowNamespace","getPayPalWindowNamespace","loadCustomScript","newWindowNamespace","resolve","reject","defaultError","PAYPAL_CLIENT_ID","paypalService","error","total","items","item","router","useRouter","authStore","useAuthStore","cartStore","useCartStore","loading","ref","errorMsg","successMsg","userProfile","showCvvHelp","saveInfo","cities","pickupPoints","shippingInfo","availablePickupPoints","handleDeliveryMethodChange","handleCityChange","paymentInfo","paymentTabs","selectedPaymentMethod","mpesaInfo","cashOnDeliveryAgreed","paypalButtonsContainer","paypalLoaded","paymentProcessing","watch","newMethod","initializePayPalButtons","paypal","data","actions","orderData","subtotal","cart","order","handlePayPalSuccess","err","paypalOrder","getBaseOrderData","firebaseService","shippingCost","isPaymentMethodValid","computed","getPaymentButtonText","formatCurrency","handlePayPalCheckout","handlePayPalInfo","onMounted","profile","placeOrder","timestamp","orderNumber","getPaymentDetails","getOrderStatus","orderRef","initiateGepPayment","getSuccessMessage","getCardType","orderId","cardNumber","cleanedNumber","directive","el","binding","inputValue","mask","result","currentIndex","vMask"],"mappings":"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","x_google_ignoreList":[0]}