{"version":3,"file":"AdminProductsView-Dk4P7MEK.js","sources":["../../src/components/ui/Modal.vue","../../src/views/AdminProductsView.vue"],"sourcesContent":["<script setup>\nimport { ref, watch, onMounted, onBeforeUnmount } from 'vue'\n\nconst props = defineProps({\n  show: {\n    type: Boolean,\n    default: false\n  },\n  title: {\n    type: String,\n    default: ''\n  }\n})\n\nconst emit = defineEmits(['close'])\n\nconst modal = ref(null)\n\nconst handleEscape = (e) => {\n  if (e.key === 'Escape' && props.show) {\n    emit('close')\n  }\n}\n\nconst handleClickOutside = (e) => {\n  if (modal.value && !modal.value.contains(e.target) && props.show) {\n    emit('close')\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('keydown', handleEscape)\n  document.addEventListener('mousedown', handleClickOutside)\n})\n\nonBeforeUnmount(() => {\n  document.removeEventListener('keydown', handleEscape)\n  document.removeEventListener('mousedown', handleClickOutside)\n})\n\nwatch(() => props.show, (newVal) => {\n  if (newVal) {\n    document.body.style.overflow = 'hidden'\n  } else {\n    document.body.style.overflow = ''\n  }\n})\n</script>\n\n<template>\n  <Teleport to=\"body\">\n    <div v-if=\"show\" class=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      <div class=\"fixed inset-0 bg-black bg-opacity-50 transition-opacity\" @click=\"emit('close')\"></div>\n      \n      <div ref=\"modal\" class=\"bg-white rounded-lg shadow-xl w-full max-w-md z-10 overflow-hidden transform transition-all\">\n        <div class=\"flex justify-between items-center p-4 border-b\">\n          <h3 class=\"text-lg font-medium\">{{ title }}</h3>\n          <button @click=\"emit('close')\" class=\"text-gray-500 hover:text-gray-700\">\n            <span class=\"sr-only\">Close</span>\n            <svg class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        \n        <div class=\"p-4\">\n          <slot></slot>\n        </div>\n        \n        <div v-if=\"$slots.footer\" class=\"p-4 border-t bg-gray-50\">\n          <slot name=\"footer\"></slot>\n        </div>\n      </div>\n    </div>\n  </Teleport>\n</template>\n","<template>\n  <div class=\"admin-products min-h-screen bg-light-primary dark:bg-dark-primary transition-colors duration-300\">\n    <div class=\"container mx-auto px-4 py-8\">\n      <!-- Enhanced Header section -->\n      <div class=\"flex justify-between items-center mb-12 bg-light-secondary dark:bg-dark-secondary p-6 rounded-xl shadow-lg\">\n        <div>\n          <Breadcrumbs :items=\"[ { text: 'Dashboard', path: '/admin' }, { text: 'Products' }]\" />\n          <h1 class=\"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mt-2\">Manage Products</h1>\n        </div>\n        <router-link \n          to=\"/admin/products/new\" \n          class=\"bg-btn-primary hover:bg-btn-primary-hover dark:hover:bg-btn-primary-dark text-white py-2 px-4 rounded-btn flex items-center shadow-btn hover:shadow-btn-hover transition-btn duration-200\"\n        >\n          <span class=\"mr-2\">Add New Product</span>\n          <span class=\"text-xl\">+</span>\n        </router-link>\n      </div>\n\n      <!-- Enhanced metric cards with gradients -->\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n        <!-- Total Products card -->\n        <div class=\"flex flex-col h-full bg-gradient-to-br from-light-secondary to-accent-primary/10 dark:from-dark-secondary dark:to-accent-primary/20 rounded-xl shadow-lg p-6 border-2 border-accent-primary/20\">\n          <h3 class=\"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary mb-1\">Total Products</h3>\n          <p class=\"text-3xl font-bold text-accent-primary\">{{ products.length }}</p>\n          <p class=\"text-xs text-light-text-secondary dark:text-dark-text-secondary mt-1\">Active listings</p>\n        </div>\n\n        <!-- Low Stock card -->\n        <div class=\"flex flex-col h-full bg-gradient-to-br from-light-secondary to-orange-500/10 dark:from-dark-secondary dark:to-orange-500/20 rounded-xl shadow-lg p-6 border-2 border-orange-500/20\">\n          <h3 class=\"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary mb-1\">Low Stock</h3>\n          <p class=\"text-3xl font-bold text-orange-500\">{{ lowStockCount }}</p>\n          <div class=\"flex items-center mt-2\">\n            <div class=\"h-2 flex-grow rounded-full bg-light-neutral-200 dark:bg-dark-neutral-700\">\n              <div class=\"h-2 rounded-full bg-orange-500 transition-all duration-300\" :style=\"`width: ${(lowStockCount / products.length) * 100}%`\"></div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"flex flex-col h-full bg-gradient-to-br from-light-secondary to-blue-500/10 dark:from-dark-secondary dark:to-blue-500/20 rounded-xl shadow-lg p-6 border-2 border-blue-500/20\">\n          <h3 class=\"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary mb-1\">Featured</h3>\n          <p class=\"text-3xl font-bold text-blue-500\">{{ featuredCount }}</p>\n          <p class=\"text-xs text-accent-tertiary mt-1\">\n            {{ ((featuredCount / products.length) * 100).toFixed(1) }}% of products\n          </p>\n        </div>\n\n        <div class=\"flex flex-col h-full bg-gradient-to-br from-light-secondary to-cyan-500/10 dark:from-dark-secondary dark:to-cyan-500/20 rounded-xl shadow-lg p-6 border-2 border-cyan-500/20\">\n          <h3 class=\"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary mb-1\">Total Value</h3>\n          <p class=\"text-3xl font-bold text-cyan-500\">{{ formatCurrency(totalInventoryValue) }}</p>\n          <p class=\"text-xs text-light-text-secondary dark:text-dark-text-secondary mt-1\">Inventory worth</p>\n        </div>\n      </div>\n\n      <!-- Enhanced Filter Section -->\n      <div class=\"bg-light-secondary dark:bg-dark-secondary rounded-xl shadow-lg p-6 mb-6 border border-light-neutral-300 dark:border-dark-neutral-700\">\n        <div class=\"flex flex-wrap items-center gap-4\">\n          <div class=\"flex-1\">\n            <input\n              type=\"text\"\n              v-model=\"searchQuery\"\n              placeholder=\"Search products...\"\n              class=\"w-full p-2 border border-light-neutral-300 dark:border-dark-neutral-600 rounded bg-light-primary dark:bg-dark-primary text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-accent-primary focus:border-accent-primary\"\n            />\n          </div>\n          <div>\n            <select\n              v-model=\"categoryFilter\"\n              class=\"p-2 border border-light-neutral-300 dark:border-dark-neutral-600 rounded bg-light-primary dark:bg-dark-primary text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-accent-primary focus:border-accent-primary\"\n            >\n              <option value=\"all\">All Categories</option>\n              <option v-for=\"category in categories\" :key=\"category\" :value=\"category\">\n                {{ category }}\n              </option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <!-- Enhanced Table -->\n      <div class=\"bg-light-secondary dark:bg-dark-secondary rounded-xl shadow-lg overflow-hidden border border-light-neutral-300 dark:border-dark-neutral-700\">\n        <div class=\"overflow-x-auto\">\n          <table class=\"min-w-full bg-light-secondary dark:bg-dark-secondary\">\n            <thead class=\"bg-light-neutral-100 dark:bg-dark-neutral-700\">\n              <tr>\n                <th class=\"py-3 px-4 text-left text-light-text-primary dark:text-dark-text-primary\">\n                  <button @click=\"sortProducts('image')\">\n                    Image\n                  </button>\n                </th>\n                <th class=\"py-3 px-4 text-left text-light-text-primary dark:text-dark-text-primary\">\n                  <button @click=\"sortProducts('name')\">\n                    Name\n                  </button>\n                </th>\n                <th class=\"py-3 px-4 text-left text-light-text-primary dark:text-dark-text-primary\">\n                  <button @click=\"sortProducts('category')\">\n                    Category\n                  </button>\n                </th>\n                <th class=\"py-3 px-4 text-left text-light-text-primary dark:text-dark-text-primary\">\n                  <button @click=\"sortProducts('price')\">\n                    Price\n                  </button>\n                </th>\n                <th class=\"py-3 px-4 text-left text-light-text-primary dark:text-dark-text-primary\">\n                  <button @click=\"sortProducts('stock')\">\n                    Stock\n                  </button>\n                </th>\n                <th class=\"py-3 px-4 text-left text-light-text-primary dark:text-dark-text-primary\">\n                  <button @click=\"sortProducts('featured')\">\n                    Featured\n                  </button>\n                </th>\n                <th class=\"py-3 px-4 text-left text-light-text-primary dark:text-dark-text-primary\">\n                  <button @click=\"sortProducts('actions')\">\n                    Actions\n                  </button>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-if=\"loading\">\n                <td colspan=\"7\" class=\"py-4 text-center\">\n                  <LoadingSpinner />\n                </td>\n              </tr>\n              <tr v-else-if=\"filteredProducts.length === 0\">\n                <td colspan=\"7\" class=\"py-4 text-center text-light-text-secondary dark:text-dark-text-secondary\">\n                  No products found\n                </td>\n              </tr>\n              <tr v-for=\"product in filteredProducts\" :key=\"product.id\" class=\"border-b border-light-neutral-200 dark:border-dark-neutral-600 hover:bg-light-neutral-100 dark:hover:bg-dark-neutral-800 transition-colors\">\n                <td class=\"py-3 px-4\">\n                  <div class=\"relative w-16 h-16 rounded overflow-hidden bg-light-neutral-100 dark:bg-dark-neutral-800\">\n                    <img \n                      :src=\"processImageUrl(product.images?.[0] || product.imageUrl || product.image)\" \n                      :alt=\"product.name\"\n                      class=\"w-full h-full object-cover\"\n                      @error=\"handleImageError\"\n                    />\n                  </div>\n                </td>\n                <td class=\"py-3 px-4 text-light-text-primary dark:text-dark-text-primary\">{{ product.name }}</td>\n                <td class=\"py-3 px-4 text-light-text-primary dark:text-dark-text-primary\">{{ product.category }}</td>\n                <td class=\"py-3 px-4 text-light-text-primary dark:text-dark-text-primary\">${{ product.price.toFixed(2) }}</td>\n                <td class=\"py-3 px-4 text-light-text-primary dark:text-dark-text-primary\">{{ product.stock }}</td>\n                <td class=\"py-3 px-4\">\n                  <span v-if=\"product.featured\" class=\"text-accent-tertiary dark:text-accent-tertiary\">Yes</span>\n                  <span v-else class=\"text-light-neutral-500 dark:text-dark-neutral-500\">No</span>\n                </td>\n                <td class=\"py-3 px-4\">\n                  <div class=\"flex space-x-2\">\n                    <button \n                      @click=\"editProduct(product)\" \n                      class=\"text-accent-quaternary dark:text-accent-quaternary hover:text-accent-quaternary/80 dark:hover:text-accent-quaternary/80 transition-colors\"\n                    >\n                      Edit\n                    </button>\n                    <button \n                      @click=\"confirmDelete(product)\" \n                      class=\"text-orange-600 dark:text-orange-500 hover:text-orange-700 dark:hover:text-orange-400 transition-colors\"\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <!-- Delete Confirmation Modal -->\n      <Modal v-if=\"showDeleteModal\" @close=\"showDeleteModal = false\">\n        <template #header>\n          <h3 class=\"text-xl font-medium text-light-text-primary dark:text-dark-text-primary\">Confirm Delete</h3>\n        </template>\n        <template #body>\n          <p class=\"text-light-text-secondary dark:text-dark-text-secondary\">\n            Are you sure you want to delete \"{{ productToDelete?.name }}\"?\n            This action cannot be undone.\n          </p>\n        </template>\n        <template #footer>\n          <div class=\"flex justify-end space-x-3\">\n            <Button \n              variant=\"secondary\" \n              @click=\"showDeleteModal = false\"\n            >\n              Cancel\n            </Button>\n            <Button \n              variant=\"danger\" \n              @click=\"deleteProduct\"\n            >\n              Delete\n            </Button>\n          </div>\n        </template>\n      </Modal>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\nimport Breadcrumbs from '../components/ui/Breadcrumbs.vue';\nimport { useRouter } from 'vue-router';\nimport { firebaseService } from '../services/firebaseService';\nimport LoadingSpinner from '../components/ui/LoadingSpinner.vue';\nimport Modal from '../components/ui/Modal.vue';\nimport Button from '../components/ui/Button.vue';\nimport { formatCurrency } from '@/utils/currency';\nimport { getImageUrl } from '@/utils/imageLoader';\n\nconst router = useRouter();\nconst products = ref([]);\nconst loading = ref(true);\nconst searchQuery = ref('');\nconst showDeleteModal = ref(false);\nconst productToDelete = ref(null);\nconst emptyProduct = ref({});\n\n/**\n * ## Process image URL\n * Returns a valid image URL or a placeholder image.\n */\nconst processImageUrl = (url) => {\n  if (!url) return getImageUrl('placeholder.jpg');\n  \n  if (typeof url === 'string') {\n    // Handle base64 images\n    if (url.startsWith('data:image')) {\n      return url;\n    }\n    // Handle base64 images without data:image prefix\n    if (url.startsWith('/9j/') || url.startsWith('iVBOR')) {\n      return `data:image/jpeg;base64,${url}`;\n    }\n    // Handle base64 images with incorrect prefix\n    if (url.startsWith('base64://')) {\n      return url.replace('base64://', '');\n    }\n  }\n  return url;\n};\n\n/**\n * ## Handle image error\n * Displays a placeholder image for any broken images.\n */\nconst handleImageError = (event) => {\n  console.error('Image failed to load:', event.target.src);\n  event.target.src = getImageUrl('placeholder.jpg');\n  \n  event.target.onerror = function() {\n    const parent = event.target.parentNode;\n    if (parent) {\n      const svgElement = document.createElement('div');\n      svgElement.innerHTML = `\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"w-full h-full\">\n          <rect width=\"100%\" height=\"100%\" fill=\"#f0f0f0\"/>\n          <path d=\"M12 6v12M6 12h12\" stroke=\"#aaa\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n        </svg>\n      `;\n      svgElement.className = 'broken-image rounded w-16 h-16 flex items-center justify-center bg-light-neutral-200 dark:bg-dark-neutral-200';\n      parent.replaceChild(svgElement, event.target);\n    }\n  };\n};\n\n// Fetch products when component mounts\nconst fetchProducts = async () => {\n  try {\n    loading.value = true;\n    const fetchedProducts = await firebaseService.getProducts();\n    products.value = fetchedProducts.map(product => ({\n      ...product,\n      images: Array.isArray(product.images) ? product.images : [product.imageUrl || product.image]\n    }));\n  } catch (error) {\n    console.error('Failed to load products:', error);\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Add new state variables and computed properties\nconst sortField = ref('name');\nconst sortDirection = ref('asc');\nconst categoryFilter = ref('all');\nconst lowStockCount = computed(() => products.value.filter(p => p.stock < 5).length);\nconst featuredCount = computed(() => products.value.filter(p => p.featured).length);\nconst totalInventoryValue = computed(() =>\n  products.value.reduce((sum, product) => sum + (product.price * product.stock), 0)\n);\nconst categories = computed(() => [...new Set(products.value.map(p => p.category))]);\nconst filteredProducts = computed(() => {\n  let result = [...products.value];\n\n  if (categoryFilter.value !== 'all') {\n    result = result.filter(p => p.category === categoryFilter.value);\n  }\n\n  if (searchQuery.value) {\n    const query = searchQuery.value.toLowerCase();\n    result = result.filter(p =>\n      p.name.toLowerCase().includes(query) ||\n      p.category.toLowerCase().includes(query) ||\n      p.description.toLowerCase().includes(query)\n    );\n  }\n\n  // Sort\n  const getComparator = (a, b) => {\n    if (typeof a[sortField.value] === 'string') {\n      return a[sortField.value].localeCompare(b[sortField.value]);\n    }\n    return Number(a[sortField.value]) - Number(b[sortField.value]);\n  }\n  result.sort((a, b) => sortDirection.value === 'asc' ? getComparator(a, b) : getComparator(b, a));\n  return result;\n});\n\nconst deleteProduct = async () => {\n  if (!productToDelete.value) return;\n\n  try {\n    await firebaseService.deleteProduct(productToDelete.value.id);\n\n    // Remove from local products array\n    const index = products.value.findIndex(p => p.id === productToDelete.value.id);\n    if (index !== -1) {\n      products.value.splice(index, 1);\n    }\n\n    showDeleteModal.value = false;\n    productToDelete.value = null;\n  } catch (error) {\n    console.error('Failed to delete product:', error);\n    // Show error notification (you can add this functionality)\n  }\n};\n\nconst editProduct = (product) => {\n  router.push(`/admin/products/edit/${product.id}`);\n};\n\nconst confirmDelete = (product) => {\n  productToDelete.value = product;\n  showDeleteModal.value = true;\n};\n\nconst sortProducts = (field) => {\n  if (sortField.value === field) {\n    sortDirection.value = sortDirection.value === 'asc' ? 'desc' : 'asc';\n  } else {\n    sortField.value = field;\n    sortDirection.value = 'asc';\n  }\n};\n\n// Update the fetchProducts function to process images\nonMounted(fetchProducts);\n</script>\n\n<style scoped>\n.broken-image {\n  position: relative;\n  overflow: hidden;\n  background-color: rgb(243 244 246);\n}\n\n.dark .broken-image {\n  background-color: rgb(31 41 55);\n}\n\n.image-container {\n  position: relative;\n  overflow: hidden;\n  background-color: rgb(243 244 246);\n  transition: transform 0.2s ease-in-out;\n}\n\n.dark .image-container {\n  background-color: rgb(31 41 55);\n}\n\n.image-container:hover {\n  transform: scale(1.05);\n}\n</style>"],"names":["props","__props","emit","__emit","modal","ref","handleEscape","e","handleClickOutside","onMounted","onBeforeUnmount","watch","newVal","router","useRouter","products","loading","searchQuery","showDeleteModal","productToDelete","processImageUrl","url","getImageUrl","handleImageError","event","parent","svgElement","fetchProducts","fetchedProducts","firebaseService","product","error","sortField","sortDirection","categoryFilter","lowStockCount","computed","p","featuredCount","totalInventoryValue","sum","categories","filteredProducts","result","query","getComparator","a","b","deleteProduct","index","editProduct","confirmDelete","sortProducts","field"],"mappings":"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"}