import{u as v,a as h,r as w,o as N,w as C,c as o,b as t,d as m,e as n,f as _,g as S,h as g,v as p,i as T,F as I,j as U,k as d,n as M,t as u}from"./index-DzR321y4.js";const F={class:"container mx-auto p-4 max-w-4xl"},A={key:0,class:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 p-4 mb-6"},R={class:"flex items-start"},V={class:"bg-light-secondary dark:bg-dark-secondary rounded-lg shadow p-4 mb-6"},D={class:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4"},j={class:"mb-4"},q={class:"flex flex-wrap gap-2"},B=["disabled"],L={class:"bg-light-secondary dark:bg-dark-secondary rounded-lg shadow p-4"},P={key:0,class:"mb-4 text-light-text-secondary dark:text-dark-neutral-400"},E={key:1,class:"mb-4 text-light-text-secondary dark:text-dark-neutral-400"},Y={key:2,class:"text-light-text-secondary dark:text-dark-neutral-400"},z={key:3,class:"space-y-3"},W={class:"flex justify-between"},$={class:"font-medium text-light-text-primary dark:text-dark-text-primary"},G={class:"text-xs text-light-text-secondary dark:text-dark-neutral-400"},H={class:"mt-1 text-light-text-secondary dark:text-dark-neutral-400"},J={class:"mt-2 flex justify-between text-xs"},K=["onClick"],Z={__name:"NotificationTest",setup(O){const l=v(),s=h(),a=w({title:"Test Notification",message:"This is a test notification",type:"info"}),c=()=>{s.openIndexCreationUrl()},k=i=>{if(!i)return"";if(!(i instanceof Date))try{i=new Date(i)}catch{return"Invalid date"}return i.toLocaleString()},b=()=>{s.addNotification({title:a.value.title,message:a.value.message,type:a.value.type,timeout:5e3})},y=async()=>{l.user&&(await s.addPersistedNotification({title:a.value.title,message:a.value.message,type:a.value.type,userId:l.user.uid}),await x())},f=async i=>{await s.markAsRead(i.id),await x()},x=async()=>{l.user&&await s.loadUserNotifications()};return N(()=>{l.user&&s.loadUserNotifications()}),C(()=>l.user,i=>{i&&s.loadUserNotifications()}),(i,e)=>(d(),o("div",F,[e[16]||(e[16]=t("h1",{class:"text-2xl font-bold mb-6 text-light-text-primary dark:text-dark-text-primary"}," Notification System Test ",-1)),n(s).indexMissing?(d(),o("div",A,[t("div",R,[_(n(S),{class:"h-6 w-6 text-yellow-500 mr-3"}),t("div",null,[e[3]||(e[3]=t("p",{class:"font-bold text-light-text-primary dark:text-dark-text-primary"}," Firebase Index Required ",-1)),e[4]||(e[4]=t("p",{class:"text-sm text-light-text-secondary dark:text-dark-neutral-400 mb-2"}," Firestore needs an index to query notifications properly. Until this is fixed, notifications cannot be loaded. ",-1)),t("button",{onClick:c,class:"bg-orange-600 hover:bg-orange-700 text-white py-1 px-3 rounded text-sm"}," Create Index Now "),e[5]||(e[5]=t("p",{class:"text-xs mt-2 text-light-text-tertiary dark:text-dark-neutral-500"}," You need to be logged into the Firebase Console with appropriate permissions. ",-1))])])])):m("",!0),t("div",V,[e[10]||(e[10]=t("h2",{class:"text-lg font-semibold mb-4 text-light-text-primary dark:text-dark-text-primary"}," Create Test Notification ",-1)),t("div",D,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-light-text-secondary dark:text-dark-neutral-400 mb-1"}," Title ",-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.title=r),type:"text",class:"w-full p-2 border rounded-md bg-light-primary dark:bg-dark-primary text-light-text-primary dark:text-dark-text-primary border-light-neutral-300 dark:border-dark-neutral-600"},null,512),[[p,a.value.title]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-light-text-secondary dark:text-dark-neutral-400 mb-1"}," Type ",-1)),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.type=r),class:"w-full p-2 border rounded-md bg-light-primary dark:bg-dark-primary text-light-text-primary dark:text-dark-text-primary border-light-neutral-300 dark:border-dark-neutral-600"},e[7]||(e[7]=[t("option",{value:"info"},"Information",-1),t("option",{value:"success"},"Success",-1),t("option",{value:"warning"},"Warning",-1),t("option",{value:"error"},"Error",-1)]),512),[[T,a.value.type]])])]),t("div",j,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-light-text-secondary dark:text-dark-neutral-400 mb-1"}," Message ",-1)),g(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.message=r),rows:"3",class:"w-full p-2 border rounded-md bg-light-primary dark:bg-dark-primary text-light-text-primary dark:text-dark-text-primary border-light-neutral-300 dark:border-dark-neutral-600"},null,512),[[p,a.value.message]])]),t("div",q,[t("button",{onClick:b,class:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700"}," Show In-App Notification "),t("button",{onClick:y,class:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",disabled:!n(l).user}," Create Persisted Notification ",8,B),t("button",{onClick:x,class:"px-4 py-2 bg-light-neutral-200 dark:bg-dark-neutral-700 text-light-text-primary dark:text-dark-text-primary rounded-md hover:bg-light-neutral-300 dark:hover:bg-dark-neutral-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-primary"}," Reload Notifications ")])]),t("div",L,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold mb-4 text-light-text-primary dark:text-dark-text-primary"}," Current Notifications ",-1)),n(l).user?n(s).indexMissing?(d(),o("div",E,e[12]||(e[12]=[t("p",null,"Cannot load notifications until the Firestore index is created",-1)]))):n(s).userNotifications.length===0?(d(),o("div",Y,e[13]||(e[13]=[t("p",null,"You have no notifications yet",-1)]))):(d(),o("div",z,[(d(!0),o(I,null,U(n(s).userNotifications,r=>(d(),o("div",{key:r.id,class:M(["p-3 border rounded-md",{"border-blue-300 dark:border-blue-700 bg-blue-50 dark:bg-blue-900/30":r.type==="info","border-green-300 dark:border-green-700 bg-green-50 dark:bg-green-900/30":r.type==="success","border-yellow-300 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-900/30":r.type==="warning","border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-900/30":r.type==="error"}])},[t("div",W,[t("div",$,u(r.title),1),t("div",G,u(k(r.createdAt)),1)]),t("div",H,u(r.message),1),t("div",J,[t("span",null,"Status: "+u(r.read?"Read":"Unread"),1),r.read?m("",!0):(d(),o("button",{key:0,onClick:Q=>f(r),class:"text-accent-primary hover:underline"}," Mark as read ",8,K))])],2))),128))])):(d(),o("div",P,e[11]||(e[11]=[t("p",null,"Log in to see your persisted notifications",-1)]))),e[15]||(e[15]=t("div",{class:"mt-6 text-sm text-light-text-secondary dark:text-dark-neutral-400"},[t("h3",{class:"font-medium mb-2 text-light-text-primary dark:text-dark-text-primary"},"Troubleshooting Tips"),t("ul",{class:"list-disc list-inside space-y-1"},[t("li",null,"If notifications aren't appearing, create the required Firestore index"),t("li",null,"Make sure you're logged in to see your notifications"),t("li",null,'Try creating a notification and then click "Reload Notifications"')])],-1))])]))}};export{Z as default};
//# sourceMappingURL=NotificationTest-qYgHeMmM.js.map
