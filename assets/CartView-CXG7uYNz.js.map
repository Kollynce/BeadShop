{"version":3,"file":"CartView-CXG7uYNz.js","sources":["../../node_modules/@heroicons/vue/24/outline/esm/ChevronUpIcon.js","../../src/views/CartView.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    \"stroke-width\": \"1.5\",\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\"\n  }, [\n    _createElementVNode(\"path\", {\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      d: \"m4.5 15.75 7.5-7.5 7.5 7.5\"\n    })\n  ]))\n}","<script setup>\nimport { useCartStore } from '../stores/cart'\nimport { computed, ref } from 'vue'\nimport { Dialog, DialogPanel, DialogTitle, TransitionChild, TransitionRoot, Disclosure, DisclosureButton, DisclosurePanel } from '@headlessui/vue'\nimport { XMarkIcon, ChevronUpIcon } from '@heroicons/vue/24/outline'\nimport { formatCurrency } from '@/utils/currency'\n\nconst cartStore = useCartStore()\nconst isUpdating = ref(false)\nconst removeDialogOpen = ref(false)\nconst itemToRemove = ref(null)\n\nconst cart = computed(() => cartStore.cart)\nconst subtotal = computed(() => cartStore.subtotal)\nconst itemCount = computed(() => cartStore.itemCount)\n\n// Shipping cost calculation (free over KES 10,000)\nconst shippingCost = computed(() => {\n  return subtotal.value >= 10000 ? 0 : 1000\n})\n\n// Total cost calculation\nconst total = computed(() => {\n  return subtotal.value + shippingCost.value\n})\n\n// Update item quantity with visual feedback\nconst updateQuantity = async (productId, newQuantity) => {\n  isUpdating.value = true\n  \n  if (newQuantity <= 0) {\n    await cartStore.removeFromCart(productId)\n  } else {\n    await cartStore.updateQuantity(productId, newQuantity)\n  }\n  \n  setTimeout(() => {\n    isUpdating.value = false\n  }, 300)\n}\n\n// Handle item removal with confirmation\nconst confirmRemove = (product) => {\n  itemToRemove.value = product\n  removeDialogOpen.value = true\n}\n\n// Remove item from cart\nconst removeItem = () => {\n  if (itemToRemove.value) {\n    cartStore.removeFromCart(itemToRemove.value.id)\n    removeDialogOpen.value = false\n    itemToRemove.value = null\n  }\n}\n</script>\n\n<template>\n  <main class=\"container mx-auto px-4 py-8 max-w-6xl\">\n    <h1 class=\"text-3xl font-bold mb-8 text-light-text-primary dark:text-dark-text-primary\">Shopping Cart</h1>\n    \n    <div v-if=\"cart.length === 0\" class=\"text-center py-12 bg-light-secondary dark:bg-dark-secondary rounded-lg shadow-sm border border-light-neutral-300 dark:border-dark-neutral-600\">\n      <div class=\"w-40 h-40 mx-auto mb-6\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"w-full h-full text-light-neutral-400 dark:text-dark-neutral-500\">\n          <circle cx=\"9\" cy=\"21\" r=\"1\" fill=\"currentColor\"/>\n          <circle cx=\"20\" cy=\"21\" r=\"1\" fill=\"currentColor\"/>\n          <path d=\"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <line x1=\"5\" y1=\"5\" x2=\"22\" y2=\"5\" class=\"text-red-500\" stroke-width=\"1.5\"/>\n        </svg>\n      </div>\n      <p class=\"text-xl mb-6 text-light-text-secondary dark:text-dark-text-secondary\">Your cart is empty</p>\n      <router-link to=\"/products\" class=\"bg-orange-500 hover:bg-orange-600 dark:bg-orange-600 dark:hover:bg-orange-500 text-white px-6 py-3 rounded-md inline-block transition-colors focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:outline-none\">\n        Browse Products\n      </router-link>\n    </div>\n    \n    <div v-else class=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n      <!-- Cart Items (2/3 width) -->\n      <section class=\"md:col-span-2\" aria-labelledby=\"cart-items-heading\">\n        <h2 id=\"cart-items-heading\" class=\"sr-only\">Cart Items</h2>\n        \n        <!-- Mobile-only order summary disclosure -->\n        <Disclosure as=\"div\" class=\"mb-6 md:hidden\">\n          <DisclosureButton class=\"flex w-full justify-between rounded-lg bg-light-secondary dark:bg-dark-secondary px-4 py-3 text-left text-sm font-medium text-light-text-primary dark:text-dark-text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary\">\n            <span>Order Summary ({{ itemCount }} items)</span>\n            <ChevronUpIcon class=\"h-5 w-5 ui-open:rotate-180 ui-open:transform transition-transform\" />\n          </DisclosureButton>\n          <DisclosurePanel class=\"px-4 pt-4 pb-2 bg-light-secondary dark:bg-dark-secondary rounded-b-lg\">\n            <div class=\"space-y-2 text-sm\">\n              <div class=\"flex justify-between text-light-text-primary dark:text-dark-text-primary\">\n                <span>Subtotal</span>\n                <span>{{ formatCurrency(subtotal) }}</span>\n              </div>\n              <div class=\"flex justify-between\">\n                <span class=\"text-light-text-primary dark:text-dark-text-primary\">Shipping</span>\n                <span v-if=\"shippingCost > 0\" class=\"text-light-text-primary dark:text-dark-text-primary\">{{ formatCurrency(shippingCost) }}</span>\n                <span v-else class=\"text-accent-tertiary\">Free</span>\n              </div>\n              <div class=\"border-t border-light-neutral-300 dark:border-dark-neutral-600 pt-2 mt-2\">\n                <div class=\"flex justify-between font-bold text-light-text-primary dark:text-dark-text-primary\">\n                  <span>Total</span>\n                  <span>{{ formatCurrency(total) }}</span>\n                </div>\n              </div>\n            </div>\n          </DisclosurePanel>\n        </Disclosure>\n        \n        <transition-group name=\"cart-item\" tag=\"ul\" class=\"divide-y divide-light-neutral-300 dark:divide-dark-neutral-600\">\n          <li v-for=\"item in cart\" \n              :key=\"item.id\" \n              class=\"flex py-6 first:pt-0 items-center cart-item-transition\"\n              :class=\"{'opacity-50': isUpdating}\">\n            <div class=\"relative\">\n              <img :src=\"item.image\" \n                   :alt=\"item.name\" \n                   class=\"w-24 h-24 object-cover rounded-md shadow-sm\" \n                   loading=\"lazy\">\n            </div>\n            \n            <div class=\"ml-6 flex-grow\">\n              <router-link :to=\"`/product/${item.id}`\" \n                          class=\"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary hover:text-orange-500 dark:hover:text-orange-400 focus:outline-none focus:underline\"\n                          :aria-label=\"`View ${item.name} details`\">\n                {{ item.name }}\n              </router-link>\n              <p class=\"text-light-text-secondary dark:text-dark-text-secondary mt-1\">{{ formatCurrency(item.price) }} each</p>\n              \n              <div class=\"flex items-center mt-3\">\n                <div class=\"flex items-center border border-light-neutral-300 dark:border-dark-neutral-600 rounded-md shadow-sm\">\n                  <button \n                    @click=\"updateQuantity(item.id, item.quantity - 1)\"\n                    class=\"px-3 py-1 text-light-text-primary dark:text-dark-text-primary hover:bg-light-neutral-100 dark:hover:bg-dark-neutral-700 transition-colors rounded-l-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-inset\"\n                    aria-label=\"Decrease quantity\"\n                  >\n                    <span aria-hidden=\"true\">âˆ’</span>\n                  </button>\n                  <span class=\"px-4 py-1 min-w-[40px] text-center text-light-text-primary dark:text-dark-text-primary\" aria-label=\"Quantity\">{{ item.quantity }}</span>\n                  <button \n                    @click=\"updateQuantity(item.id, item.quantity + 1)\"\n                    class=\"px-3 py-1 text-light-text-primary dark:text-dark-text-primary hover:bg-light-neutral-100 dark:hover:bg-dark-neutral-700 transition-colors rounded-r-md focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-inset\"\n                    aria-label=\"Increase quantity\"\n                  >\n                    <span aria-hidden=\"true\">+</span>\n                  </button>\n                </div>\n                \n                <button \n                  @click=\"confirmRemove(item)\"\n                  class=\"ml-4 text-red-500 hover:text-red-700 transition-colors focus:outline-none focus:underline\"\n                  aria-label=\"Remove item from cart\"\n                >\n                  Remove\n                </button>\n              </div>\n            </div>\n            \n            <div class=\"text-right\">\n              <p class=\"font-semibold text-light-text-primary dark:text-dark-text-primary\">{{ formatCurrency(item.price * item.quantity) }}</p>\n            </div>\n          </li>\n        </transition-group>\n      </section>\n      \n      <!-- Order Summary (1/3 width) -->\n      <section class=\"bg-light-secondary dark:bg-dark-secondary p-6 rounded-lg shadow-sm h-fit md:sticky md:top-24 hidden md:block border border-light-neutral-300 dark:border-dark-neutral-600\" aria-labelledby=\"order-summary-heading\">\n        <h2 id=\"order-summary-heading\" class=\"text-xl font-bold mb-6 border-b border-light-neutral-300 dark:border-dark-neutral-600 pb-3 text-light-text-primary dark:text-dark-text-primary\">Order Summary</h2>\n        \n        <div class=\"space-y-4\">\n          <div class=\"flex justify-between text-light-text-primary dark:text-dark-text-primary\">\n            <span>Subtotal ({{ itemCount }} {{ itemCount === 1 ? 'item' : 'items' }})</span>\n            <span>{{ formatCurrency(subtotal) }}</span>\n          </div>\n          \n          <div class=\"flex justify-between text-light-text-primary dark:text-dark-text-primary\">\n            <span>Shipping</span>\n            <span v-if=\"shippingCost > 0\">{{ formatCurrency(shippingCost) }}</span>\n            <span v-else class=\"text-accent-tertiary font-medium\">Free</span>\n          </div>\n          \n          <div v-if=\"shippingCost > 0\" class=\"text-sm bg-accent-quaternary/10 text-accent-quaternary p-3 rounded-md\">\n            <p>Free shipping on orders over KES 10,000</p>\n            <p class=\"mt-1\">Add {{ formatCurrency(10000 - subtotal) }} more to qualify</p>\n          </div>\n          \n          <div class=\"border-t border-light-neutral-300 dark:border-dark-neutral-600 pt-4 mt-2\">\n            <div class=\"flex justify-between font-bold text-lg text-light-text-primary dark:text-dark-text-primary\">\n              <span>Total</span>\n              <span>{{ formatCurrency(total) }}</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"mt-8 space-y-4\">\n          <router-link \n            to=\"/checkout\" \n            class=\"bg-orange-500 hover:bg-orange-600 dark:bg-orange-600 dark:hover:bg-orange-500 text-white w-full py-3 block text-center rounded-md transition-colors focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed\"\n            :disabled=\"cart.length === 0\"\n            :aria-disabled=\"cart.length === 0\"\n          >\n            Proceed to Checkout\n          </router-link>\n          \n          <router-link \n            to=\"/products\" \n            class=\"text-accent-quaternary hover:text-accent-quaternary/80 transition-colors text-center block focus:outline-none focus:underline\"\n          >\n            Continue Shopping\n          </router-link>\n        </div>\n      </section>\n    </div>\n    \n    <!-- HeadlessUI Dialog for remove confirmation -->\n    <TransitionRoot appear :show=\"removeDialogOpen\" as=\"template\">\n      <Dialog as=\"div\" @close=\"removeDialogOpen = false\" class=\"relative z-10\">\n        <TransitionChild\n          as=\"template\"\n          enter=\"duration-300 ease-out\"\n          enter-from=\"opacity-0\"\n          enter-to=\"opacity-100\"\n          leave=\"duration-200 ease-in\"\n          leave-from=\"opacity-100\"\n          leave-to=\"opacity-0\"\n        >\n          <div class=\"fixed inset-0 bg-black bg-opacity-25\" />\n        </TransitionChild>\n\n        <div class=\"fixed inset-0 overflow-y-auto\">\n          <div class=\"flex min-h-full items-center justify-center p-4 text-center\">\n            <TransitionChild\n              as=\"template\"\n              enter=\"duration-300 ease-out\"\n              enter-from=\"opacity-0 scale-95\"\n              enter-to=\"opacity-100 scale-100\"\n              leave=\"duration-200 ease-in\"\n              leave-from=\"opacity-100 scale-100\"\n              leave-to=\"opacity-0 scale-95\"\n            >\n              <DialogPanel class=\"w-full max-w-md transform overflow-hidden rounded-lg bg-light-secondary dark:bg-dark-secondary p-6 text-left align-middle shadow-xl transition-all\">\n                <DialogTitle as=\"h3\" class=\"text-lg font-medium leading-6 text-light-text-primary dark:text-dark-text-primary\">\n                  Remove Item\n                </DialogTitle>\n                <div class=\"mt-2\">\n                  <p class=\"text-sm text-light-text-secondary dark:text-dark-text-secondary\">\n                    Are you sure you want to remove \"{{ itemToRemove?.name }}\" from your cart?\n                  </p>\n                </div>\n\n                <div class=\"mt-6 flex space-x-3 justify-end\">\n                  <button\n                    type=\"button\"\n                    class=\"inline-flex justify-center rounded-md border border-light-neutral-300 dark:border-dark-neutral-600 bg-light-secondary dark:bg-dark-secondary px-4 py-2 text-sm font-medium text-light-text-primary dark:text-dark-text-primary hover:bg-light-neutral-100 dark:hover:bg-dark-neutral-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-primary focus-visible:ring-offset-2\"\n                    @click=\"removeDialogOpen = false\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    class=\"inline-flex justify-center rounded-md border border-transparent bg-red-500 px-4 py-2 text-sm font-medium text-white hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2\"\n                    @click=\"removeItem\"\n                  >\n                    Remove\n                  </button>\n                </div>\n              </DialogPanel>\n            </TransitionChild>\n          </div>\n        </div>\n      </Dialog>\n    </TransitionRoot>\n  </main>\n</template>\n\n<style scoped>\n.cart-item-transition {\n  transition: all 0.3s ease;\n}\n\n.cart-item-enter-active,\n.cart-item-leave-active {\n  transition: all 0.5s ease;\n}\n\n.cart-item-enter-from,\n.cart-item-leave-to {\n  opacity: 0;\n  transform: translateX(-20px);\n}\n\n.cart-item-move {\n  transition: transform 0.5s ease;\n}\n\n/* HeadlessUI specific transitions */\n:deep(.ui-open) {\n  transform: rotate(180deg); \n}\n</style>\n"],"names":["render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","cartStore","useCartStore","isUpdating","ref","removeDialogOpen","itemToRemove","cart","computed","subtotal","itemCount","shippingCost","total","updateQuantity","productId","newQuantity","confirmRemove","product","removeItem"],"mappings":"6QAEe,SAASA,EAAOC,EAAMC,EAAQ,CAC3C,OAAQC,EAAU,EAAIC,EAAoB,MAAO,CAC/C,MAAO,6BACP,KAAM,OACN,QAAS,YACT,eAAgB,MAChB,OAAQ,eACR,cAAe,OACf,YAAa,MACjB,EAAK,CACDC,EAAoB,OAAQ,CAC1B,iBAAkB,QAClB,kBAAmB,QACnB,EAAG,4BACJ,CAAA,CACL,CAAG,CACH,o4ECXA,MAAMC,EAAYC,EAAY,EACxBC,EAAaC,EAAI,EAAK,EACtBC,EAAmBD,EAAI,EAAK,EAC5BE,EAAeF,EAAI,IAAI,EAEvBG,EAAOC,EAAS,IAAMP,EAAU,IAAI,EACpCQ,EAAWD,EAAS,IAAMP,EAAU,QAAQ,EAC5CS,EAAYF,EAAS,IAAMP,EAAU,SAAS,EAG9CU,EAAeH,EAAS,IACrBC,EAAS,OAAS,IAAQ,EAAI,GACtC,EAGKG,EAAQJ,EAAS,IACdC,EAAS,MAAQE,EAAa,KACtC,EAGKE,EAAiB,MAAOC,EAAWC,IAAgB,CACvDZ,EAAW,MAAQ,GAEfY,GAAe,EACjB,MAAMd,EAAU,eAAea,CAAS,EAExC,MAAMb,EAAU,eAAea,EAAWC,CAAW,EAGvD,WAAW,IAAM,CACfZ,EAAW,MAAQ,EACvB,EAAK,GAAG,CACR,EAGMa,EAAiBC,GAAY,CACjCX,EAAa,MAAQW,EACrBZ,EAAiB,MAAQ,EAC3B,EAGMa,EAAa,IAAM,CACnBZ,EAAa,QACfL,EAAU,eAAeK,EAAa,MAAM,EAAE,EAC9CD,EAAiB,MAAQ,GACzBC,EAAa,MAAQ,KAEzB","x_google_ignoreList":[0]}